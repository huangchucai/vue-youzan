{"version":3,"sources":["webpack:///static/js/cart.896cd38eda79980adce8.js","webpack:///./src/modules/js/api.js?4c58**","webpack:///./src/modules/js/mixin.js?53fa","webpack:///./src/pages/cart/cart.js"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topLists","subList","rank","search","goodsDetail","deal","add","cart","addNum","reduceNum","remove","removeMore","key","hasOwnProperty","28","exports","29","30","31","4","mixin","filters","money","val","toFixed","60","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__cart_css__","__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_base_css__","__WEBPACK_IMPORTED_MODULE_3_js_api_js__","__WEBPACK_IMPORTED_MODULE_4_vue__","__WEBPACK_IMPORTED_MODULE_5_velocity_animate__","__WEBPACK_IMPORTED_MODULE_5_velocity_animate___default","__WEBPACK_IMPORTED_MODULE_6_axios__","__WEBPACK_IMPORTED_MODULE_6_axios___default","__WEBPACK_IMPORTED_MODULE_7_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_8_mint_ui_lib_style_css__","__WEBPACK_IMPORTED_MODULE_9_mint_ui__","el","data","cartList","isShow","goodsChecked","editingShop","editingShopIndex","totalMoney","removeData","created","this","getCartDetail","computed","allChecked","get","length","every","list","checked","set","newVal","forEach","goodsList","goods","selectLists","arr","total","push","price","number","allRemoteChecked","removeChecked","removeLists","methods","_this","a","then","res","lists","editing","editingMsg","chooseGoods","shop","attr","chooseShop","shopIndex","i","chooseAll","post","id","status","reduce","goodsIndex","_this2","confirm","splice","removeShop","removeList","_this3","ids","findIndex","start","e","startX","changedTouches","clientX","end","endX","left","$refs","mixins"],"mappings":"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","file":"static/js/cart.896cd38eda79980adce8.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar url = {\n  hotLists: '/index/hotLists',\n  banner: '/index/banner',\n  topLists: '/category/topList',\n  subList: '/category/subList',\n  rank: '/category/rank',\n  search: '/search/list',\n  goodsDetail: '/goods/details',\n  deal: '/goods/deal',\n  add: '/cart/add',\n  cart: '/cart/list',\n  addNum: '/cart/add',\n  reduceNum: '/cart/reduce',\n  remove: '/cart/remove',\n  removeMore: '/cart/mremove'\n};\nvar host = 'http://rapapi.org/mockjsdata/24170';\n\nfor (var key in url) {\n  if (url.hasOwnProperty(key)) {\n    url[key] = host + url[key];\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 31:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar mixin = {\n  filters: {\n    money: function money(val) {\n      if (typeof val === 'number') {\n        return val.toFixed(2);\n      }\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (mixin);\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_css__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_base_css__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_api_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_velocity_animate__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_velocity_animate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_velocity_animate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_axios__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_mixin_js__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_mint_ui_lib_style_css__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_mint_ui_lib_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_mint_ui_lib_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_mint_ui__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_mint_ui__);\n\n\n\n\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_4_vue__[\"default\"]({\n  el: '#app-cart',\n  data: function data() {\n    return {\n      cartList: null,\n      isShow: false,\n      goodsChecked: false,\n      editingShop: null, //正在编辑的商铺\n      editingShopIndex: -1,\n      totalMoney: 0,\n      removeData: null // 删除单个商品信息\n    };\n  },\n  created: function created() {\n    this.getCartDetail();\n  },\n\n  computed: {\n    allChecked: {\n      get: function get() {\n        if (this.cartList && this.cartList.length) {\n          return this.cartList.every(function (list) {\n            return list.checked;\n          });\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        this.cartList.forEach(function (list) {\n          list.checked = newVal;\n          list.goodsList.forEach(function (goods) {\n            goods.checked = newVal;\n          });\n        });\n      }\n    },\n    selectLists: function selectLists() {\n      if (this.cartList && this.cartList.length) {\n        var arr = [];\n        var total = 0;\n        this.cartList.forEach(function (list) {\n          list.goodsList.forEach(function (goods) {\n            if (goods.checked) {\n              arr.push(goods);\n              total += goods.price * goods.number;\n            }\n          });\n        });\n        this.totalMoney = total;\n        return arr;\n      }\n      return [];\n    },\n\n    allRemoteChecked: {\n      get: function get() {\n        if (this.editingShop) {\n          return this.editingShop.goodsList.every(function (goods) {\n            return goods.removeChecked;\n          });\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        this.editingShop.goodsList.forEach(function (goods) {\n          goods.removeChecked = newVal;\n        });\n      }\n    },\n    removeLists: function removeLists() {\n      if (this.editingShop) {\n        var arr = [];\n        this.editingShop.goodsList.forEach(function (goods) {\n          if (goods.removeChecked) {\n            arr.push(goods);\n          }\n        });\n        return arr;\n      }\n      return [];\n    }\n  },\n  methods: {\n    getCartDetail: function getCartDetail() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_6_axios___default.a.get(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cart).then(function (res) {\n        var lists = res.data.cartList;\n        lists.forEach(function (list) {\n          list.checked = false;\n          list.editing = false;\n          // 商品删除的状态\n          list.removeChecked = false;\n          list.editingMsg = '编辑';\n          list.goodsList.forEach(function (goods) {\n            goods.checked = false;\n            goods.removeChecked = false;\n          });\n        });\n        _this.cartList = lists;\n      });\n    },\n\n    // 商品选择\n    chooseGoods: function chooseGoods(shop, goods) {\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      goods[attr] = !goods[attr];\n      shop[attr] = shop.goodsList.every(function (goods) {\n        return goods[attr];\n      });\n    },\n\n    // 商铺选择\n    chooseShop: function chooseShop(shop) {\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      shop[attr] = !shop[attr];\n      shop.goodsList.forEach(function (goods) {\n        goods[attr] = shop[attr];\n      });\n    },\n\n    // 编辑商铺\n    editing: function editing(shop, shopIndex) {\n      shop.editing = !shop.editing;\n      shop.editingMsg = shop.editing ? '完成' : '编辑';\n      this.cartList.forEach(function (list, i) {\n        if (shopIndex !== i) {\n          list.editing = false;\n          list.editingMsg = shop.editing ? '' : '编辑';\n        }\n      });\n      this.editingShop = shop.editing ? shop : null;\n      this.editingShopIndex = shop.editing ? shopIndex : -1;\n    },\n\n    // 全选\n    chooseAll: function chooseAll() {\n      var attr = this.editingShop ? 'allRemoteChecked' : 'allChecked';\n      this[attr] = !this[attr];\n    },\n\n    // 添加商品\n    add: function add(goods) {\n      __WEBPACK_IMPORTED_MODULE_6_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].addNum, {\n        id: goods.id,\n        number: 1\n      }).then(function (res) {\n        if (res.status === 200) {\n          goods.number++;\n        }\n      });\n    },\n\n    // 减少商品\n    reduce: function reduce(goods) {\n      if (goods.number === 1) return;\n      __WEBPACK_IMPORTED_MODULE_6_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].reduceNum, {\n        id: goods.id,\n        number: 1\n      }).then(function (res) {\n        if (res.status === 200) {\n          goods.number--;\n        }\n      });\n    },\n\n    // 删除单个商品\n    remove: function remove(shop, shopIndex, goods, goodsIndex) {\n      var _this2 = this;\n\n      this.removeData = { shop: shop, shopIndex: shopIndex, goods: goods, goodsIndex: goodsIndex };\n      __WEBPACK_IMPORTED_MODULE_9_mint_ui__[\"MessageBox\"].confirm('确定要删除当前商品吗？').then(function () {\n        __WEBPACK_IMPORTED_MODULE_6_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].remove, { id: goods.id }).then(function (res) {\n          if (res.status === 200) {\n            shop.goodsList.splice(goodsIndex, 1);\n            if (!shop.goodsList.length) {\n              _this2.cartList.splice(shopIndex, 1);\n              _this2.removeShop();\n            }\n          }\n        });\n      }, function () {\n        _this2.removeShop();\n      });\n      // console.log(MessageBox)\n    },\n\n    // 删除多个商品\n    removeList: function removeList() {\n      var _this3 = this;\n\n      __WEBPACK_IMPORTED_MODULE_9_mint_ui__[\"MessageBox\"].confirm('确定要删除当前商品吗？').then(function () {\n        var ids = [];\n        _this3.removeLists.forEach(function (goods) {\n          ids.push(goods.id);\n        });\n        __WEBPACK_IMPORTED_MODULE_6_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].removeMore, ids).then(function (res) {\n          if (res.status === 200) {\n            var arr = [];\n            _this3.editingShop.goodsList.forEach(function (goods) {\n              // 找到被选中删除的索引\n              var index = _this3.removeLists.findIndex(function (remove) {\n                return remove.id === goods.id;\n              });\n              if (index === -1) {\n                arr.push(goods);\n              }\n            });\n            if (arr.length) {\n              _this3.editingShop.goodsList = arr;\n            } else {\n              _this3.cartList.splice(_this3.editingShopIndex, 1);\n              _this3.removeShop();\n            }\n          }\n        });\n      }, function () {\n        _this3.removeShop();\n      });\n    },\n\n    // 删除商品后回到编辑状态\n    removeShop: function removeShop() {\n      this.editingShop = null;\n      this.shopIndex = -1;\n      this.cartList.forEach(function (shop) {\n        shop.editing = false; // 把编辑状态设置为false\n        shop.editingMsg = '编辑';\n      });\n    },\n\n    // 移动效果\n    start: function start(e, goods) {\n      goods.startX = e.changedTouches[0].clientX; //获取手指的开始触发距最右边的距离\n    },\n    end: function end(e, shopIndex, goods, goodsIndex) {\n      var endX = e.changedTouches[0].clientX; // 手指结束触发距离最右边的距离\n      var left = '0';\n      if (goods.startX - endX > 60) {\n        left = '-60px';\n      }\n      if (endX - goods.startX > 60) {\n        left = '0px';\n      }\n      // console.log(this.$refs)\n      // console.log(e)\n      __WEBPACK_IMPORTED_MODULE_5_velocity_animate___default()(this.$refs['goods-' + shopIndex + '-' + goodsIndex], {\n        left: left\n      });\n    }\n  },\n  mixins: [__WEBPACK_IMPORTED_MODULE_7_js_mixin_js__[\"a\" /* default */]]\n});\n\n/***/ })\n\n},[60]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.896cd38eda79980adce8.js","let url = {\r\n  hotLists: '/index/hotLists',\r\n  banner: '/index/banner',\r\n  topLists: '/category/topList',\r\n  subList: '/category/subList',\r\n  rank: '/category/rank',\r\n  search: '/search/list',\r\n  goodsDetail: '/goods/details',\r\n  deal: '/goods/deal',\r\n  add: '/cart/add',\r\n  cart: '/cart/list',\r\n  addNum: '/cart/add',\r\n  reduceNum: '/cart/reduce',\r\n  remove: '/cart/remove',\r\n  removeMore: '/cart/mremove'\r\n}\r\nlet host = 'http://rapapi.org/mockjsdata/24170'\r\n\r\nfor (let key in url){\r\n  if(url.hasOwnProperty(key)){\r\n    url[key] = host + url[key]\r\n  }\r\n}\r\n\r\nexport default url\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","const mixin = {\r\n  filters: {\r\n    money(val) {\r\n      if(typeof val === 'number') {\r\n        return val.toFixed(2);\r\n      }\r\n    }\r\n  }\r\n}\r\nexport default mixin\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import './cart.css'\nimport './cart_trade.css'\nimport './cart_base.css'\n\nimport url from 'js/api.js'\nimport Vue from 'vue'\nimport Velocity from 'velocity-animate'\nimport axios from 'axios'\nimport mixin from 'js/mixin.js'\nimport 'mint-ui/lib/style.css'\nimport {MessageBox} from 'mint-ui';\n\nnew Vue({\n  el: '#app-cart',\n  data(){\n    return {\n      cartList: null,\n      isShow: false,\n      goodsChecked: false,\n      editingShop: null,  //正在编辑的商铺\n      editingShopIndex: -1,\n      totalMoney: 0,\n      removeData: null // 删除单个商品信息\n    }\n  },\n  created(){\n    this.getCartDetail()\n  },\n  computed: {\n    allChecked: {\n      get() {\n        if (this.cartList && this.cartList.length) {\n          return this.cartList.every(list => {\n            return list.checked\n          })\n        }\n        return false\n      },\n      set(newVal) {\n        this.cartList.forEach(list => {\n          list.checked = newVal\n          list.goodsList.forEach(goods => {\n            goods.checked = newVal\n          })\n        })\n      }\n    },\n    selectLists() {\n      if (this.cartList && this.cartList.length) {\n        let arr = []\n        let total = 0\n        this.cartList.forEach(list => {\n          list.goodsList.forEach(goods => {\n            if (goods.checked) {\n              arr.push(goods)\n              total += goods.price * goods.number\n            }\n          })\n        })\n        this.totalMoney = total\n        return arr\n      }\n      return []\n    },\n    allRemoteChecked: {\n      get() {\n        if (this.editingShop) {\n          return this.editingShop.goodsList.every(goods => {\n            return goods.removeChecked\n          })\n        }\n        return false\n      },\n      set(newVal) {\n        this.editingShop.goodsList.forEach(goods => {\n          goods.removeChecked = newVal\n        })\n      }\n    },\n    removeLists() {\n      if (this.editingShop) {\n        let arr = []\n        this.editingShop.goodsList.forEach(goods => {\n          if (goods.removeChecked) {\n            arr.push(goods)\n          }\n        })\n        return arr\n      }\n      return []\n    }\n  },\n  methods: {\n    getCartDetail(){\n      axios.get(url.cart).then((res) => {\n        const lists = res.data.cartList;\n        lists.forEach(list => {\n          list.checked = false\n          list.editing = false\n          // 商品删除的状态\n          list.removeChecked = false\n          list.editingMsg = '编辑'\n          list.goodsList.forEach((goods) => {\n            goods.checked = false\n            goods.removeChecked = false\n          })\n        })\n        this.cartList = lists\n      })\n    },\n    // 商品选择\n    chooseGoods(shop, goods){\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\n      goods[attr] = !goods[attr];\n      shop[attr] = shop.goodsList.every(goods => {\n        return goods[attr]\n      })\n    },\n    // 商铺选择\n    chooseShop(shop){\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\n      shop[attr] = !shop[attr]\n      shop.goodsList.forEach(goods => {\n        goods[attr] = shop[attr]\n      })\n    },\n    // 编辑商铺\n    editing(shop, shopIndex) {\n      shop.editing = !shop.editing\n      shop.editingMsg = shop.editing ? '完成' : '编辑'\n      this.cartList.forEach((list, i) => {\n        if (shopIndex !== i) {\n          list.editing = false\n          list.editingMsg = shop.editing ? '' : '编辑'\n        }\n      })\n      this.editingShop = shop.editing ? shop : null\n      this.editingShopIndex = shop.editing ? shopIndex : -1\n    },\n    // 全选\n    chooseAll() {\n      let attr = this.editingShop ? 'allRemoteChecked' : 'allChecked'\n      this[attr] = !this[attr]\n    },\n    // 添加商品\n    add(goods) {\n      axios.post(url.addNum, {\n        id: goods.id,\n        number: 1\n      }).then((res) => {\n        if (res.status === 200) {\n          goods.number++\n        }\n      })\n    },\n    // 减少商品\n    reduce(goods){\n      if (goods.number === 1) return\n      axios.post(url.reduceNum, {\n        id: goods.id,\n        number: 1\n      }).then((res) => {\n        if (res.status === 200) {\n          goods.number--\n        }\n      })\n    },\n    // 删除单个商品\n    remove(shop, shopIndex, goods, goodsIndex) {\n      this.removeData = {shop, shopIndex, goods, goodsIndex}\n      MessageBox.confirm('确定要删除当前商品吗？').then(() => {\n        axios.post(url.remove, {id: goods.id}).then((res) => {\n          if (res.status === 200) {\n            shop.goodsList.splice(goodsIndex, 1)\n            if (!shop.goodsList.length) {\n              this.cartList.splice(shopIndex, 1)\n              this.removeShop()\n            }\n          }\n        })\n      }, () => {\n        this.removeShop()\n      })\n      // console.log(MessageBox)\n    },\n    // 删除多个商品\n    removeList(){\n      MessageBox.confirm('确定要删除当前商品吗？').then(() => {\n        let ids = []\n        this.removeLists.forEach(goods => {\n          ids.push(goods.id)\n        })\n        axios.post(url.removeMore, ids).then((res) => {\n          if (res.status === 200) {\n            let arr = []\n            this.editingShop.goodsList.forEach(goods => {\n              // 找到被选中删除的索引\n              let index = this.removeLists.findIndex(remove => {\n                return remove.id === goods.id\n              })\n              if (index === -1) {\n                arr.push(goods)\n              }\n            })\n            if (arr.length) {\n              this.editingShop.goodsList = arr\n            } else {\n              this.cartList.splice(this.editingShopIndex, 1)\n              this.removeShop()\n            }\n          }\n        })\n      }, () => {\n        this.removeShop()\n      })\n    },\n    // 删除商品后回到编辑状态\n    removeShop() {\n      this.editingShop = null;\n      this.shopIndex = -1;\n      this.cartList.forEach(shop => {\n        shop.editing = false  // 把编辑状态设置为false\n        shop.editingMsg = '编辑'\n      })\n    },\n    // 移动效果\n    start(e, goods){\n      goods.startX = e.changedTouches[0].clientX //获取手指的开始触发距最右边的距离\n    },\n    end(e, shopIndex, goods, goodsIndex) {\n      let endX = e.changedTouches[0].clientX; // 手指结束触发距离最右边的距离\n      let left = '0';\n      if (goods.startX - endX > 60) {\n        left = '-60px'\n      }\n      if (endX - goods.startX > 60) {\n        left = '0px'\n      }\n      // console.log(this.$refs)\n      // console.log(e)\n      Velocity(this.$refs[`goods-${shopIndex}-${goodsIndex}`], {\n        left\n      })\n    }\n  },\n  mixins: [mixin]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}